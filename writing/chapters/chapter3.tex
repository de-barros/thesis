%!TEX root = ../thesis.tex
\begin{savequote}[75mm]
Nulla facilisi. In vel sem. Morbi id urna in diam dignissim feugiat. Proin molestie tortor eu velit. Aliquam erat volutpat. Nullam ultrices, diam tempus vulputate egestas, eros pede varius leo.
\qauthor{Quoteauthor Lastname}
\end{savequote}

\chapter{Results}
\label{chap:results}

\newthought{Several experiments} were designed to evaluate the performance of the Discrete Voter Model. Two case studies, on elections in Chicago, were chosen to demonstrate DVM's performance on real data.

\section{Experiment Specification}
\label{sec:exper_spec}

The Discrete Voter Model was evaluated on the $2 \times 2$ case (i.e. $2$ candidates and $2$ demographic groups) and the $3 \times 2$ case that was untenable for previous methods of determining racially polarized voting.

The Discrete Voter Model was run on mock \texttt{Election} created with the specifications in Subsections \ref{subsec:two_by_two} and \ref{subsec:three_by_two}, using \texttt{dvm\_evaluator}. All other variables are in Table \ref{table:dvm_vars}.

\begin{table}[ht]
 \centering
 \caption{Non-Election Variables for DVM Experiments}
 \label{table:dvm_vars}
 \begin{tabular}{|l|c|c|}
   \hline
   \multicolumn{1}{|c}{Variable} & \multicolumn{1}{|c|}{option $1$}& \multicolumn{1}{c|}{option $2$} \\
   \hline
   number of MCMC steps, $t$ & $1000$ & $10000$ \\
   granularity of the PHCs, $g$ & $10$ & $100$ \\
   scoring function & \texttt{expec\_votes} & \texttt{prob\_votes} \\
   kernel & Random Walk Metropolis & Hamiltonian Monte Carlo \\
  \hline
 \end{tabular}
\end{table}

Not all combinations of variables proved feasible for the scope of these experiments. Some, like using the Hamiltonian Monte Carlo kernel with the \texttt{prob\_votes} scoring function for $10000$ steps on a set of granularity $100$ PHCs, were infeasible. The combinations that were run are presented in Section \ref{sec:exper_results}.


\subsection{$2 \times 2$}
\label{subsec:two_by_two}

For this case, $6$ mock elections were created for single-precinct districts of size $100$, with $2$ demographic groups, $g_1$ and $g_2$, and two candidates, $a$ and $b$.

Each of the $6$ has one of the $3$ demographic distributions of the district in Table \ref{table:demo_dist}. Each of these distributions is labeled $\{d_i\}_{i=1}^3$ for reference in Section \ref{sec:exper_results}.

Each of the $6$ has one of the $2$ demographic voting probabilities for candidates $a$ and $b$ in Table \ref{table:voting}. Each of these voting patterns is labeled $\{v_i\}_{i=1}^2$ for reference in Section \ref{sec:exper_results}.

The demographic voting probabilities and demographic distributions were combined to create the $6$ unique elections.

\begin{table}[ht]
 \centering
 \caption{Demographic Distributions Tested in the $2 \times 2$ Case}
 \label{table:demo_dist}
 \begin{tabular}{|c|c|c|}
   \hline
   Label & $g_1$ ($\%$) & $g_2$ ($\%$) \\
   \hline
   $d_1$ & $50$ & $50$ \\
   $d_2$ & $25$ & $75$ \\
   $d_3$ & $10$ & $90$ \\
  \hline
 \end{tabular}
\end{table}

\begin{table}[ht]
 \centering
 \caption{Demographic Voting Probabilities Tested in the $2 \times 2$ Case}
 \label{table:voting}
 \begin{tabular}{|c|c|c|c|}
   \hline
   Label & Group & $a$ ($\%$) & $b$ ($\%$) \\
   \hline
   \multirow{2}{*}{$v_1$} & $g_1$ & $50$ & $50$ \\
   & $g_2$ & $30$ & $70$ \\
   \hline
   \multirow{2}{*}{$v_2$} & $g_1$ & $25$ & $75$ \\
   & $g_2$ & $20$ & $80$ \\
  \hline
 \end{tabular}
\end{table}

The model was run on each election $5$ times, with a combination of the variables for either $1000$ or $10000$ steps with both granularity $10$ and granularity $100$ probabilistic hypercubes, using both the Hamiltonian Monte Carlo and Random Walk Metropolis kernels.

These elections were also used to evaluate King's Ecological Inference method, using the \texttt{kei\_evaluator} function.

\FloatBarrier
\subsection{$3 \times 2$}
\label{subsec:three_by_two}

For this case, $6$ mock elections were created for single-precinct districts of size $100$, with $3$ demographic groups, $g_1$, $g_2$ and $g_3$, and two candidates, $a$ and $b$.

Each of the $6$ has one of the $3$ demographic distributions of the district in Table \ref{table:demo_dist}. Each of these distributions is labeled $\{d_i\}_{i=4}^6$ for reference in Section \ref{sec:exper_results}.

Each of the $6$ has one of the $2$ demographic voting probabilities for candidates $a$ and $b$ in Table \ref{table:voting}. Each of these voting patterns is labeled $\{v_i\}_{i=3}^4$ for reference in Section \ref{sec:exper_results}.

The demographic voting probabilities and demographic distributions were combined to create the $6$ unique elections.

\begin{table}[ht]
 \centering
 \caption{Demographic Distributions Tested in the $3 \times 2$ Case}
 \label{table:demo_dist_3}
 \begin{tabular}{|c|c|c|c|}
   \hline
   Label & $g_1$ ($\%$) & $g_2$ ($\%$) & $g_3$ ($\%$) \\
   \hline
   $d_4$ & $50$ & $50$ & $0$ \\
   $d_5$ & $25$ & $25$ & $50$ \\
   $d_6$ & $33$ & $33$ & $34$ \\
  \hline
 \end{tabular}
\end{table}

\begin{table}[ht]
 \centering
 \caption{Demographic Voting Probabilities Tested in the $3 \times 2$ Case}
 \label{table:voting_3}
 \begin{tabular}{|c|c|c|c|}
   \hline
   Label & Group & $a$ ($\%$) & $b$ ($\%$) \\
   \hline
   \multirow{3}{*}{$v_3$} & $g_1$ & $20$ & $80$ \\
   & $g_2$ & $80$ & $20$ \\
   & $g_3$ & $40$ & $60$ \\
   \hline
   \multirow{3}{*}{$v_4$} & $g_1$ & $30$ & $70$ \\
   & $g_2$ & $40$ & $60$ \\
   & $g_3$ & $50$ & $50$ \\
  \hline
 \end{tabular}
\end{table}

\FloatBarrier
\section{Experiment Results}
\label{sec:exper_results}

\newthought{The} \texttt{dvm\_evaluator} and \texttt{kei\_evaluator} functions report two metrics: accuracy and runtime. The ``accuracy" of the model on a mock election is the average mean squared error (MSE) between the model's outputted demographic voting probabilities (DVP) and the DVP that generated the election data, stored in the \texttt{Election} objects. The MSE is averaged over all $5$ trials of the experiment. The lower the MSE, the more accurate the model. The ``runtime" of the model is how long, in seconds, the model took to generate its output. The lower the runtime, the faster the model.

Tables \ref{table:rwm_expec_2d} to \ref{table:hmc_3d} summarize the results of running the Discrete Voter Model and King's Ecological Inference method on all of the experiments, for a total of $66$ experiments replicated $5$ times each.

In each table, $g$ is the granularity of the probability hypercube, and $t$ is the number of steps.

The experiments were conducted in Python 3.7.4 on a 2018 MacBook Pro with a 2.3 GHz Quad-Core Intel Core i5 processor, 16 GB of 2133 MHz LPDDR3 RAM, and a Intel Iris Plus Graphics 655 1536 MB graphics card. All numbers are given with $3$ significant figures of precision.

\subsection{Random Walk Metropolis in the $2 \times 2$ Case}

\begin{table}[ht]
  \centering
  \caption{Experiment Results for the RWM Kernel, Scoring by Expectation, for $2 \times 2$ Elections}
  \label{table:rwm_expec_2d}
  \input{tables/rwm_expec_2d.tex}
\end{table}


\begin{table}[ht]
  \centering
  \caption{Experiment Results for the RWM Kernel, Scoring by Probability, for $2 \times 2$ Elections}
  \label{table:rwm_prob_2d}
  \input{tables/rwm_prob_2d.tex}
\end{table}


\FloatBarrier
\subsection{Hamiltonian Monte Carlo in the $2 \times 2$ Case}


\begin{table}[ht]
  \centering
  \caption{Experiment Results for the HMC Kernel for $2 \times 2$ Elections}
  \label{table:hmc_2d}
  \input{tables/hmc_2d.tex}
\end{table}


\FloatBarrier
\subsection{King's Ecological Inference Method in the $2 \times 2$ Case}


\begin{table}[ht]
  \centering
  \caption{Experiment Results for King's Ecological Inference Method on $2 \times 2$ Elections}
  \label{table:kei_results}
  \input{tables/kei_results.tex}
\end{table}


\FloatBarrier
\subsection{Random Walk Metropolis in the $3 \times 2$ Case}

\begin{table}[ht]
  \centering
  \caption{Experiment Results for the RWM Kernel, Scoring by Expectation, for $3 \times 2$ Elections}
  \label{table:rwm_3d}
  \input{tables/rwm_3d.tex}
\end{table}


\FloatBarrier
\subsection{Hamiltonian Monte Carlo in the $3 \times 2$ Case}


\begin{table}[ht]
  \centering
  \caption{Experiment Results for the HMC Kernel, Scoring by Expectation, for $3 \times 2$ Elections}
  \label{table:hmc_3d}
  \input{tables/hmc_3d.tex}
\end{table}


In addition to the presentation of the numeric evaluation, a presentation of select visualizations of the models produced by the Discrete Voter Model show its expressive power.

Figure \ref{fig:2d_viz} shows the distribution of probability over the $2$D hypercube for a model in the $2 \times 2$ case. The figure is $3$-dimensional, with the third dimension being the probability of being in one of the cells of the hypercube. This is multinomial and much more expressive of possible outcomes.

\begin{figure}[ht]\centering
 \includegraphics[width=\linewidth]{figures/2d_viz.png}
 \caption{Distribution of Probability over the 2D Hypercube for a Model in the $2 \times 2$ Case}
 \label{fig:2d_viz}
\end{figure}

Figure \ref{fig:3d_viz} shows the distribution of probability over the $2$D hypercube for a model in the $3 \times 2$ case. Since there are $3$ dimensions for demographic groups, Figure \ref{fig:3d_viz} presents the fourth dimension, probability, as directed arrows across a cross section of the dimensions. The colors of these arrows give the corresponding probability.

\begin{figure}[ht]\centering
 \includegraphics[width=\linewidth]{figures/3d_viz.png}
 \caption{Distribution of Probability over the 3D Hypercube for a Model in the $3 \times 2$ Case}
 \label{fig:3d_viz}
\end{figure}
